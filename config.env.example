# ============================================================
# Configurazione Citofono VoIP
# ============================================================
#
# Copia questo file in config.env e modifica i valori:
#
#   cp config.env.example config.env
#
# ATTENZIONE: config.env contiene credenziali e NON va committato
# nel repository.
# ============================================================

# ------------------------------------------------------------
# GPIO Pins (numerazione BCM)
# Verificare con 'gpio readall' o 'pinout' sul Raspberry Pi
# ------------------------------------------------------------

# Pin di ingresso collegato al segnale di suoneria del citofono
# (tramite optoisolatore). Configurato come input con pull-up interno.
# Default: 17
PIN_SUONERIA=17

# Pin di uscita collegato al modulo relè per l'apertura del portone.
# Default: 27
PIN_RELE_PORTONE=27

# Pin di uscita per il LED di stato del sistema (opzionale).
# Lampeggio lento = operativo, lampeggio rapido = errore.
# Default: 22
PIN_LED_STATO=22

# ------------------------------------------------------------
# Configurazione SIP
# Credenziali per la registrazione sul centralino Grandstream
# ------------------------------------------------------------

# Username dell'interno SIP dedicato al citofono.
# Default: 2000
SIP_USERNAME=2000

# Password dell'interno SIP. OBBLIGATORIA, il sistema non parte
# senza questo valore.
# Default: (nessuno)
SIP_PASSWORD=changeme

# Hostname o indirizzo IP del centralino SIP.
# Default: centralino.ponsacco.local
SIP_DOMAIN=centralino.ponsacco.local

# Porta SIP del centralino (UDP).
# Default: 5060
SIP_PORT=5060

# ------------------------------------------------------------
# Chiamata
# ------------------------------------------------------------

# Numero da chiamare quando viene rilevata la suoneria.
# Può essere un interno singolo o un Ring Group del Grandstream.
# Default: 6400
NUMERO_DA_CHIAMARE=6400

# Codice DTMF che l'utente digita durante la chiamata per aprire
# il portone. Evitare codici che iniziano con * (feature code
# Grandstream) e cifre consecutive uguali (RFC 4733 le fonde
# in un unico evento).
# Default: 91
DTMF_APRI_PORTONE=91

# ------------------------------------------------------------
# Timing
# ------------------------------------------------------------

# Tempo di debounce per il rilevamento della suoneria (millisecondi).
# Evita trigger multipli causati da rimbalzi del segnale.
# Default: 300
DEBOUNCE_SUONERIA_MS=300

# Durata di attivazione del relè per aprire il portone (secondi).
# Default: 2
DURATA_APERTURA=2

# Timeout massimo della chiamata prima di riagganciare
# automaticamente (secondi).
# Default: 60
TIMEOUT_CHIAMATA=60

# ------------------------------------------------------------
# Audio
# Verificare i dispositivi disponibili con:
#   aplay -l    (riproduzione)
#   arecord -l  (registrazione)
# ------------------------------------------------------------

# Dispositivo ALSA per la riproduzione audio (altoparlante).
# Default: plughw:1,0
AUDIO_PLAY_DEVICE=plughw:1,0

# Dispositivo ALSA per la registrazione audio (microfono).
# Default: plughw:1,0
AUDIO_REC_DEVICE=plughw:1,0

# ------------------------------------------------------------
# Log
# ------------------------------------------------------------

# Percorso del file di log. Il log viene scritto anche su stdout
# (visibile con journalctl quando eseguito come servizio).
# Default: /var/log/citofono-voip.log
LOG_FILE=/var/log/citofono-voip.log
